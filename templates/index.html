<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Daily Bruin | Archive</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
    <link href="../css/timeline.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../css/magnifier.css">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,700italic,400italic,300italic,300,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700' rel='stylesheet' type='text/css'>
    <script type="text/javascript" src="../js/script.js"></script>

</head>
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Daily Bruin</a>
            </div>
            <div class="col-md-5 col-md-offset-3" id="navigation">
                <form class="navbar-form" role="search">
                    <!-- <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search">
                    </div> -->
                    <div id="time-navigation">
                        <div class="btn-group" role="group" aria-label="...">
                            <!-- <button type="button" class="btn btn-default"><div class="glyphicon glyphicon-menu-left"></div></button> -->
                            <form class="form-inline" role="form">
                                <button type="button" class="btn btn-default">
                                    <select name="month" id="month" class="form-control">
                                        <option value="1">January</option>
                                        <option value="2">February</option>
                                        <option value="3">March</option>
                                        <option value="4">April</option>
                                        <option value="5">May</option>
                                        <option value="6">June</option>
                                        <option value="7">July</option>
                                        <option value="8">August</option>
                                        <option value="9" selected>September</option>
                                        <option value="10">October</option>
                                        <option value="11">November</option>
                                        <option value="12">December</option>
                                    </select>
                                </button>
                                <button type="button" class="btn btn-default">
                                    <select name="date" id="date" class="form-control">
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="7">7</option>
                                        <option value="8">8</option>
                                        <option value="9">9</option>
                                        <option value="10" selected>10</option>
                                        <option value="11">11</option>
                                        <option value="12">12</option>
                                        <option value="13">13</option>
                                        <option value="14">14</option>
                                        <option value="15">15</option>
                                        <option value="16">16</option>
                                        <option value="17">17</option>
                                        <option value="18">18</option>
                                        <option value="19">19</option>
                                        <option value="20">20</option>
                                        <option value="21">21</option>
                                        <option value="22">22</option>
                                        <option value="23">23</option>
                                        <option value="24">24</option>
                                        <option value="25">25</option>
                                        <option value="26">26</option>
                                        <option value="27">27</option>
                                        <option value="28">28</option>
                                        <option value="29">29</option>
                                        <option value="30">30</option>
                                        <option value="31">31</option>
                                    </select>
                                </button>
                                <button type="button" class="btn btn-default">
                                    <select name="year" id="year" class="form-control">
                                        <option value="1915" selected>1915</option>
                                        <option value="1916">1916</option>
                                        <option value="1917">1917</option>
                                        <option value="1918">1918</option>
                                        <option value="1919">1919</option>
                                        <option value="1920">1920</option>
                                        <option value="1921">1921</option>
                                        <option value="1922">1922</option>
                                        <option value="1923">1923</option>
                                        <option value="1924">1924</option>
                                        <option value="1925">1925</option>
                                        <option value="1926">1926</option>
                                        <option value="1927">1927</option>
                                        <option value="1928">1928</option>
                                        <option value="1929">1929</option>
                                        <option value="1930">1930</option>
                                        <option value="1931">1931</option>
                                        <option value="1932">1932</option>
                                        <option value="1933">1933</option>
                                        <option value="1934">1934</option>
                                        <option value="1935">1935</option>
                                        <option value="1936">1936</option>
                                        <option value="1937">1937</option>
                                        <option value="1938">1938</option>
                                        <option value="1939">1939</option>
                                        <option value="1940">1940</option>
                                        <option value="1941">1941</option>
                                        <option value="1942">1942</option>
                                        <option value="1943">1943</option>
                                        <option value="1944">1944</option>
                                        <option value="1945">1945</option>
                                        <option value="1946">1946</option>
                                        <option value="1947">1947</option>
                                        <option value="1948">1948</option>
                                        <option value="1949">1949</option>
                                        <option value="1950">1950</option>
                                        <option value="1951">1951</option>
                                        <option value="1952">1952</option>
                                        <option value="1953">1953</option>
                                        <option value="1954">1954</option>
                                        <option value="1955">1955</option>
                                        <option value="1956">1956</option>
                                        <option value="1957">1957</option>
                                        <option value="1958">1958</option>
                                        <option value="1959">1959</option>
                                        <option value="1960">1960</option>
                                        <option value="1961">1961</option>
                                        <option value="1962">1962</option>
                                        <option value="1963">1963</option>
                                        <option value="1964">1964</option>
                                        <option value="1965">1965</option>
                                        <option value="1966">1966</option>
                                        <option value="1967">1967</option>
                                        <option value="1968">1968</option>
                                        <option value="1969">1969</option>
                                        <option value="1970">1970</option>
                                        <option value="1971">1971</option>
                                        <option value="1972">1972</option>
                                        <option value="1973">1973</option>
                                        <option value="1974">1974</option>
                                        <option value="1975">1975</option>
                                        <option value="1976">1976</option>
                                        <option value="1977">1977</option>
                                        <option value="1978">1978</option>
                                        <option value="1979">1979</option>
                                        <option value="1980">1980</option>
                                        <option value="1981">1981</option>
                                        <option value="1982">1982</option>
                                        <option value="1983">1983</option>
                                        <option value="1984">1984</option>
                                        <option value="1985">1985</option>
                                        <option value="1986">1986</option>
                                        <option value="1987">1987</option>
                                        <option value="1988">1988</option>
                                        <option value="1989">1989</option>
                                        <option value="1990">1990</option>
                                        <option value="1991">1991</option>
                                        <option value="1992">1992</option>
                                        <option value="1993">1993</option>
                                        <option value="1994">1994</option>
                                        <option value="1995">1995</option>
                                        <option value="1996">1996</option>
                                        <option value="1997">1997</option>
                                        <option value="1998">1998</option>
                                        <option value="1999">1999</option>
                                        <option value="2000">2000</option>
                                        <option value="2001">2001</option>
                                        <option value="2002">2002</option>
                                        <option value="2003">2003</option>
                                        <option value="2004">2004</option>
                                        <option value="2005">2005</option>
                                        <option value="2006">2006</option>
                                        <option value="2007">2007</option>
                                        <option value="2008">2008</option>
                                        <option value="2009">2009</option>
                                        <option value="2010">2010</option>
                                        <option value="2011">2011</option>
                                        <option value="2012">2012</option>
                                        <option value="2013">2013</option>
                                        <option value="2014">2014</option>
                                        <option value="2015">2015</option>
                                        <option value="2016">2016</option>
                                    </select>
                                </button>
                                <input style="height:7.5vh" type="button" value="Go &#187;" class="btn btn-secondary" onclick="update(); return false;"/>
                            </form>
                            <!-- <button type="button" class="btn btn-default"><div class="glyphicon glyphicon-menu-right"></div></button> -->
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-md-3" >
                <form id="search-field">
                    <div class="input-group input-group-lg">
                        <span class="input-group-addon">Search</span>
                        <input type="text" class="form-control" placeholder="'John Wooden'" id="search-text"/>
                        <span class="input-group-btn">
                          <button class="btn btn-default" type="submit">Go</button>
                        </span>
                    </div>
                </form>
                <!--<div class="input-group">
                    <input type="text" class="form-control" placeholder="Search for...">
                                      <span class="input-group-btn">
                                        <button class="btn btn-default" type="button">Go!</button>
                                      </span>
                </div>-->
                <!-- /input-group -->
                <!-- <button type="button" class="btn btn-default"><div class="glyphicon glyphicon-menu-right"></div></button> -->
            </div>
            <div class="nav navbar-nav navbar-right">

                <a class="navbar-brand">Print Archive</a>
            <div/>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>
    <div class="header text-center">
        <div class="intro">
            <h1>
                <span id="logo">Daily Bruin</span>
                <span id="divider">|</span>
                <span id="archive">Print Archive</span>
            </h1>
            <h4 style="margin-bottom:20px">Since 1915</h4>
            <a class="btn btn-default btn-lg" id="start">START</a>
        </div>
    </div>
    <div class="wrapper">
        <div class="container">
            <div class="page-header">
                <h1 id="timeline">...A newspaper was born</h1>
            </div>
            <div class="row" >
                <div class="col-md-4" id="search-preview">
                    <div class="row">
                        <nav>
                            <ul id="pagination" class="pagination-sm"></ul>
                    </div>
                    <div class="row">
                        <div class="col-md-12" id="results">
                        </div>
                    </div>
                </div>
                <div id="viewer" class="span-12"></div>
                <script type="text/javascript">update();</script>
            </div>

        </div>
    </div>

<!--js for past 2003 stuff-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twbs-pagination/1.3.1/jquery.twbsPagination.js"></script>
<script>
    var $searchField = $("#search-field");
    var $searchText = $("#search-text");
    var $results = $("#results");
    var $pagination = $("#pagination");

    function ResultBox(resItem) {
        this.id = resItem.docsFileId;
        this.date = new Date(Date.parse(resItem.date));
        this.url = resItem.directLink;
        this.page = resItem.page;
    }

    ResultBox.prototype.toEl = function() {
        var $el = $("<div>", {class: "col-md-6 res-box"});
        var $a = $("<a>", {href: this.url, target: "_blank" });
        var $img = $("<img>", {
            class: "res-thumbnail col-md-12",
            src: "https://drive.google.com/thumbnail?sz=w320&id="  + this.id
        });
        var $a = $a.append($img);
        var $desc = $("<h4>" + this.date.toDateString() + " Page: " + this.page + "</h4>")

        $el.append($a).append($desc);
        return $el;
    }

    function handleResponse(dat) {
        console.log(dat);
        $results.html("");
        $pagination.twbsPagination({
            totalPages: dat.totalPages,
            startPage: dat.page,
            visiblePages: 10,
            initiateStartPageClick: false,
            onPageClick: function(event, page) {
                $.get("/api/search/" + $searchText.val() +"/" + page, handleResponse);
            }
        });
        dat.data.forEach(function(item) {
            var rb = new ResultBox(item);
            $results.append(rb.toEl());
        });
    }

    $searchField.submit(function(e){
        e.preventDefault();
        $pagination.unbind().removeData();
        $.get("/api/search/" + $searchText.val() , handleResponse);
    });

    $(function(){
        if($searchText.val())
            $searchField.trigger("submit");
    });
</script>

<!--js for landing page + before 2003 stuff-->
    <script src="https://code.jquery.com/jquery-2.2.3.min.js" integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script   src="https://code.jquery.com/ui/1.10.4/jquery-ui.min.js"   integrity="sha256-oTyWrNiP6Qftu4vs2g0RPCKr3g1a6QTlITNgoebxRc4="   crossorigin="anonymous"></script>
    <script type="text/javascript" src="js/Event.js"></script>
    <script type="text/javascript" src="js/Magnifier.js"></script>
<script>
    $('#logo').fadeIn(1000, function(){
        //wait for .7 second before fading in "print archive"
        setTimeout(function(){
            $('#archive').animate({
                opacity:1
            },function(){
                //wait for .7 seconds before fading in
                setTimeout(function(){
                    $('#divider').animate({
                        opacity:1,
                        top:-5
                    },900,function(){
                        $('.intro a').fadeIn();
                        $('.intro h4').fadeIn();
                    });
                },500);
            });
        },500);
    });
    $("#start").click(function() {
        $('#time-navigation').fadeIn('slow');
        $('.wrapper').fadeIn('slow');
        $('html, body').animate({
            scrollTop: $("#timeline").offset().top-50
        }, 1000, function(){
            setTimeout(function(){
                $('.header').fadeOut();
            },2000);
        });
    });

</script>
    <script>
        $("#menu-toggle").click(function(e) {
            e.preventDefault();
            $("#wrapper").toggleClass("toggled");
        });
    </script>

    <script>
        (function(){
            var evt = new Event(),
                    m = new Magnifier(evt);
            m.attach({
                thumb: '#thumb',
                large: 'images/ucladailybruin01losa_0004.jpg',
                largeWrapper: 'preview',
                zoom:5
            });
            /*Header Animation*/
            $('#start').click(function(){
                $('.intro').fadeOut(function(){
                    $('#time-navigation').fadeIn('slow');
                    $('.header').animate({
                        //'background-color':'#333',
                        'height':15+'vh',
                        'padding':0
                    }, 500);
                });
            });
        })();
    </script>
</body>
</html>